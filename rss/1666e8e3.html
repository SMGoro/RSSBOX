<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta name="generator" content="Hexo 6.3.0">
  <meta name="hexo-theme" content="https://github.com/xaoxuu/hexo-theme-stellar/tree/1.19.0">
  <meta charset="utf-8">
  

  <meta http-equiv="x-dns-prefetch-control" content="on">
  <link rel="dns-prefetch" href="https://gcore.jsdelivr.net">
  <link rel="preconnect" href="https://gcore.jsdelivr.net" crossorigin>
  <link rel="dns-prefetch" href="//unpkg.com">

  <meta name="renderer" content="webkit">
  <meta name="force-rendering" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="HandheldFriendly" content="True">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="theme-color" content="#f8f8f8">
  
  <title>Highlights From Git 2.47 - RSSBOX</title>

  
    <meta name="description" content="The open source Git project just released Git 2.47 with features and bug fixes from over 83 contributors, 28 of them new. We last caught up with you on the latest in Git back when 2.46 was released">
<meta property="og:type" content="article">
<meta property="og:title" content="Highlights From Git 2.47">
<meta property="og:url" content="https://blog.imc.re/RSSBOX/rss/1666e8e3.html">
<meta property="og:site_name" content="RSSBOX">
<meta property="og:description" content="The open source Git project just released Git 2.47 with features and bug fixes from over 83 contributors, 28 of them new. We last caught up with you on the latest in Git back when 2.46 was released">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://github.blog/wp-content/uploads/2024/10/image1.png?w=1024&amp;resize=1024%2C453">
<meta property="og:image" content="https://github.blog/wp-content/uploads/2024/10/image2.png?w=1024&amp;resize=1024%2C793">
<meta property="article:published_time" content="2024-10-09T08:19:32.000Z">
<meta property="article:modified_time" content="2024-10-09T08:19:32.000Z">
<meta property="article:author" content="SMGoro">
<meta property="article:tag" content="Blogs">
<meta property="article:tag" content="Github">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://github.blog/wp-content/uploads/2024/10/image1.png?w=1024&amp;resize=1024%2C453">
  
  
  
  <meta name="keywords" content="Blogs,Github">

  <!-- feed -->
  
    <link rel="alternate" href="/RSSBOX/atom.xml" title="RSSBOX" type="application/atom+xml">
  

  
    
<link rel="stylesheet" href="/RSSBOX/css/main.css">

  

  

  

  
    <link rel="stylesheet" href="https://gcore.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css" integrity="sha384-vKruj+a13U8yHIkAyGgK1J3ArTLzrFGBbBc0tDp4ad/EyewESeXE/Iv67Aj8gKZ0" crossorigin="anonymous">
    <script defer src="https://gcore.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.js" integrity="sha384-PwRUT/YqbnEjkZO0zZxNqcxACrXe+j766U2amXcgMg5457rve2Y7I6ZJSm2A0mS4" crossorigin="anonymous"></script>
    <script defer src="https://gcore.jsdelivr.net/npm/katex@0.16.4/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>
  


  

<!--百度统计-->
<script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?f42afe3e5b76d22c8b1a8060171c7184";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
  })();
</script>  
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-V2NSKYGXNG"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-V2NSKYGXNG');
</script>
<!--Google Adsense-->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4773172018528901" crossorigin="anonymous"></script>
</head>

<body>
  




  <div class="l_body" id="start">
    <aside class="l_left" layout="post">
    

  

<header class="header"><div class="logo-wrap"><a class="avatar" href="/RSSBOX/archives"><div class="bg" style="opacity:0;background-image:url(https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.4/avatar/round/rainbow64@3x.webp);"></div><img no-lazy class="avatar" src="https://cdn.jsdelivr.net/gh/SMGCDN/photos/icon/rsshub.png" onerror="javascript:this.classList.add('error');this.src='https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.4/image/2659360.svg';"></a><a class="title" href="/RSSBOX/"><div class="main" ff="title">RSSBOX</div><div class="sub normal cap">SMGoroのRSS订阅</div><div class="sub hover cap" style="opacity:0"> 一些好康的东西</div></a></div>

<nav class="menu dis-select"><a class="nav-item active" href="/RSSBOX/">订阅</a><a class="nav-item" href="https://blog.imc.re/">博客</a><a class="nav-item" href="https://blog.imc.re/contact">联系</a><a class="nav-item" href="https://blog.imc.re/more">更多</a></nav>
</header>


<div class="widgets">

<widget class="widget-wrapper toc single" id="data-toc"><div class="widget-header cap dis-select"><span class="name">Highlights From Git 2.47</span></div><div class="widget-body fs14"><div class="doc-tree active"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#incremental-multi-pack-indexes"><span class="toc-text">Incremental multi-pack indexes</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#quickly-find-base-branches-with-for-each-ref"><span class="toc-text">Quickly find base branches with for-each-ref</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#the-rest-of-the-iceberg"><span class="toc-text">The rest of the iceberg</span></a></li></ol></div></div></widget>



<widget class="widget-wrapper search"><div class="widget-body"><div class="search-wrapper" id="search"><form class="search-form"><input type="text" class="search-input" id="search-input" data-filter="/rss/" placeholder="文章搜索"><svg t="1670596976048" class="icon search-icon" viewbox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2676" width="200" height="200"><path d="M938.2 832.6L723.8 618.1c-2.5-2.5-5.3-4.4-7.9-6.4 36.2-55.6 57.3-121.8 57.3-193.1C773.3 222.8 614.6 64 418.7 64S64 222.8 64 418.6c0 195.9 158.8 354.6 354.6 354.6 71.3 0 137.5-21.2 193.2-57.4 2 2.7 3.9 5.4 6.3 7.8L832.5 938c14.6 14.6 33.7 21.9 52.8 21.9 19.1 0 38.2-7.3 52.8-21.8 29.2-29.1 29.2-76.4 0.1-105.5M418.7 661.3C284.9 661.3 176 552.4 176 418.6 176 284.9 284.9 176 418.7 176c133.8 0 242.6 108.9 242.6 242.7 0 133.7-108.9 242.6-242.6 242.6" p-id="2677"/></svg></form><div id="search-result"></div><div class="search-no-result">没有找到内容！</div></div></div></widget>



<widget class="widget-wrapper recent"><div class="widget-header cap theme dis-select"><span class="name">最近更新</span><a class="cap-action" id="rss" title="Subscribe" href="/atom.xml"><svg class="icon" viewbox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="8938"><path d="M800.966 947.251c0-404.522-320.872-732.448-716.69-732.448V62.785c477.972 0 865.44 395.987 865.44 884.466h-148.75z m-162.273 0h-148.74c0-228.98-181.628-414.598-405.678-414.598v-152.01c306.205 0 554.418 253.68 554.418 566.608z m-446.24-221.12c59.748 0 108.189 49.503 108.189 110.557 0 61.063-48.44 110.563-108.188 110.563-59.747 0-108.18-49.5-108.18-110.563 0-61.054 48.433-110.556 108.18-110.556z" p-id="8939"/></svg></a></div><div class="widget-body related-posts fs14"><a class="item title" href="/RSSBOX/rss/9478a4fa.html"><span class="title">I Got My Wish and Reincarnated as the Villainess (Last Boss)! 001-024 as V01-03 (Digital-Compilation) (Oan) [Oak]</span></a><a class="item title" href="/RSSBOX/rss/81997030.html"><span class="title">Keiken Zumi Na Kimi To, Keiken Zero Na Ore Ga, Otsukiai Suru Hanashi / You Were Experienced, I Was Not: Our Dating Story V01-05 [J-Novel Club] [Antithetical]</span></a><a class="item title" href="/RSSBOX/rss/2e17acd3.html"><span class="title">Trillion Game - 05 「乙女の眼差し」 (TBS 1920x1080 X264 AAC).mkv</span></a><a class="item title" href="/RSSBOX/rss/7bd92795.html"><span class="title">Sayonara Ryuusei, Konnichiwa Jinsei - 03 「女剣士」 (TBS 1920x1080 X264 AAC).mkv</span></a><a class="item title" href="/RSSBOX/rss/da1442de.html"><span class="title">Aldnoah.Zero (2024) - 16 「熱砂の進撃 -Soldiers' Pay-」 (BS11 1920x1080 X264 AAC).mp4</span></a></div></widget>
</div>
<footer class="footer dis-select"><div class="social-wrap"><a class="social" href="https://github.com/SMGoro" target="_blank" rel="external nofollow noopener noreferrer"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/SMGCDN/photos/icon/iconfont/social-github.svg"></a><a class="social" href="https://space.bilibili.com/359079394" target="_blank" rel="external nofollow noopener noreferrer"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/SMGCDN/photos/icon/iconfont/bilibili.svg"></a><a class="social" href="https://l.imc.re/zhihu" target="_blank" rel="external nofollow noopener noreferrer"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/SMGCDN/photos/icon/iconfont/zhihu.svg"></a><a class="social" href="https://l.imc.re/discord" target="_blank" rel="external nofollow noopener noreferrer"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/SMGCDN/photos/icon/iconfont/discord.svg"></a><a class="social" href="https://blog.imc.re/contact" target="_blank" rel="external nofollow noopener noreferrer"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/SMGCDN/photos/icon/iconfont/comments.svg"></a></div></footer>

    </aside>
    <div class="l_main">
      

      



<div class="bread-nav fs12"><div id="breadcrumb"><a class="cap breadcrumb" href="/RSSBOX/">主页</a><span class="sep"></span><a class="cap breadcrumb" href="/RSSBOX/">文章</a><span class="sep"></span><a class="cap breadcrumb-link" href="/RSSBOX/categories/blogs/">Blogs</a> <span class="sep"></span> <a class="cap breadcrumb-link" href="/RSSBOX/categories/blogs/github/">Github</a></div><div id="post-meta">发布于&nbsp;<time datetime="2024-10-09T08:19:32.000Z">2024-10-09</time></div></div>

<article class="md-text content post">
<h1 class="article-title"><span>Highlights From Git 2.47</span></h1>
<div>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">

<html><body><p>The open source Git project just <a target="_blank" rel="external nofollow noopener noreferrer" href="https://lore.kernel.org/git/xmqqa5fg9bsz.fsf@gitster.g/T/#u">released Git 2.47</a> with features and bug fixes from over 83 contributors, 28 of them new. We last caught up with you on the latest in Git back when <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.blog/open-source/git/highlights-from-git-2-46/">2.46 was released</a>.</p>
<p>To celebrate this most recent release, here is GitHub’s look at some of the most interesting features and changes introduced since last time.</p>
<h2 id="incremental-multi-pack-indexes">Incremental multi-pack indexes<a aria-label="Incremental multi-pack indexes" class="heading-link pl-2 text-italic text-bold" href="#incremental-multi-pack-indexes"></a></h2>
<p>Returning readers of this series will no doubt remember our coverage of all things related to multi-pack indexes (MIDXs). If you’re new here, or could use a refresher, here’s a brief recap.</p>
<p>Git stores objects (the blobs, trees, commits, and tags that make up your repository’s contents) in one of two formats: either loose or packed. Loose objects are the individual files stored in the two-character sub-directories of <code>$GIT_DIR/objects</code>, each representing a shard of the total set of loose objects. For instance, the object <code>08103b9f2b6e7fbed517a7e268e4e371d84a9a10</code> would be stored loose at <code>$GIT_DIR/objects/08/103b9f2b6e7fbed517a7e268e4e371d84a9a10</code>.</p>
<p>Objects can also be packed together in a single file known as a <a target="_blank" rel="external nofollow noopener noreferrer" href="https://git-scm.com/book/en/v2/Git-Internals-Packfiles">packfile</a>. Packfiles store multiple objects together in a binary format, which has a couple of advantages over storing objects loose. Packfiles often have better <a target="_blank" rel="external nofollow noopener noreferrer" href="https://en.wikipedia.org/wiki/Locality_of_reference">cache locality</a> because similar objects are often packed next to or near each other. Packfiles also have the advantage of being able to represent objects as deltas of one another, enabling a more compact representation of pairs of similar objects.</p>
<p>However, repositories can start to experience poor performance when they accumulate many packfiles, since Git has to search through each packfile to perform every object lookup. To improve performance when a repository accumulates too many packs, a repository must repack to generate a single new pack which contains the combined contents of all existing packs. This leaves the repository with only a single pack (resulting in faster lookup times), but the cost of generating that pack can be expensive.</p>
<p>In Git 2.21, <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.blog/open-source/git/highlights-from-git-2-21/#multi-pack-indexes">multi-pack indexes</a> were introduced to mitigate this expense. MIDXs are an index mapping between objects to the pack and location within that pack at which they appear. Because MIDXs can store information about objects across multiple packs, they enable fast object lookups for repositories that have many individual packs, like so:</p>
<p><img><img alt="non-incremental multi-pack index (MIDX) with objects in three packs" class="aligncenter size-large wp-image-80316 width-fit" data-recalc-dims="1" data-src="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" decoding="async" height="453" loading="lazy" sizes="(max-width: 1000px) 100vw, 1000px" src="https://github.blog/wp-content/uploads/2024/10/image1.png?w=1024&amp;resize=1024%2C453" width="1024"></p>
<p>Here the multi-pack index is shown as a series of colored rectangles, each representing an object. The arrows point to those objects’ location within the pack from which they were selected in the MIDX, and encode the information stored in the MIDX itself.</p>
<p>But generating and updating the repository’s MIDX takes time, too: each object in the packs which are part of the MIDX need to be examined to record their object ID and offset within their source pack. This time can stretch even further if you are using <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.blog/open-source/git/scaling-monorepo-maintenance/#multi-pack-bitmaps">multi-pack reachability bitmaps</a>, since it adds a potentially large number of traversals covering significant portions of the repository to the runtime.</p>
<p>So what is there to do? Repacking your repository to optimize object lookups can be slow, but so can updating your repository’s multi-pack index.</p>
<p>Git 2.47 introduces a new experimental feature known as incremental multi-pack indexes, which allow storing more than one multi-pack index together in a chain of MIDX layers. Each layer contains packs and objects which are distinct from earlier layers, so the MIDX can be updated quickly via an append operation that only takes time proportional to the new objects being added, not the size of the overall MIDX. Here’s an example:</p>
<p><img><img alt="incremental MIDX with two layers, describing objects in six unique packs)" class="aligncenter size-large wp-image-80317 width-fit" data-recalc-dims="1" data-src="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" decoding="async" height="793" loading="lazy" sizes="(max-width: 1000px) 100vw, 1000px" src="https://github.blog/wp-content/uploads/2024/10/image2.png?w=1024&amp;resize=1024%2C793" width="1024"></p>
<p>The first half of the figure is the same as earlier, but the second half shows a new incremental layer in the multi-pack index chain. The objects contained in the MIDX on the second half are unique to the ones on the first half. But note that the source packs which appear in the MIDX on the second half have some overlap with the objects which appear in the MIDX on the first half.</p>
<p>In Git 2.47, the incremental multi-pack index feature is still considered experimental, and doesn’t yet support multi-pack reachability bitmaps. But support for incremental multi-pack bitmaps is currently <a target="_blank" rel="external nofollow noopener noreferrer" href="https://lore.kernel.org/git/cover.1723755667.git.me@ttaylorr.com/">under review</a> and will hopefully appear in a future release.</p>
<p>(At GitHub, we plan to use incremental multi-pack bitmaps as part of further scaling efforts to support even larger repositories during repository maintenance. When we do, expect a blog post from us covering the details.)</p>
<p>You can experiment with incremental multi-pack indexes by running:</p>
<pre><code>$ git multi-pack-index write --incremental
</code></pre>
<p>to add new packs to your repository’s existing MIDX today.</p>
<p>[<a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/git/git/compare/53129a06809fe64fb0baefdc19428bed5d929abe...fcb2205b77470c60f996a3206b2d4aebf6e951e3">source</a>]</p>
<h2 id="quickly-find-base-branches-with-for-each-ref">Quickly find base branches with <code>for-each-ref</code><a aria-label="Quickly find base branches with &lt;code&gt;for-each-ref&lt;/code&gt;" class="heading-link pl-2 text-italic text-bold" href="#quickly-find-base-branches-with-for-each-ref"></a></h2>
<p>Have you ever been working on a branch, or spelunking through a new codebase and wondered to yourself, “what is this branch based on”? It’s a common question, but the answer can be surprisingly difficult to answer with the previously existing tools.</p>
<p>A good approximation for determining what branch was the likely starting point for some commit C is to select the branch which minimizes the first-parent commits which are unique to C. (Here, “first parent commits” are the commits which are reachable by only walking through a merge commit’s first parent instead of traversing through all of its parents).</p>
<p>If you’re wondering: “why limit the traversal to the first-parent history?”, the answer is because the first-parent history reflects the main path through history which leads up to a commit. By minimizing the number of unique first-parent commits among a set of candidate base branches, you are essentially searching for the one whose primary development path is closest to commit C. So the branch with the fewest unique first-parent commits is likely where C originated or was branched from.</p>
<p>You might think that you could use something like <code>git rev-list --count --first-parent</code> to count the number of first-parent commits between two endpoints. But that’s not quite the case, since rev-list will remove all commits reachable from the base before returning the unique count.</p>
<p>Git 2.47 introduces a new tool for figuring out which branch was the likely starting point for some commit via a new atom used in <code>for-each-ref</code>‘s <code>--format</code> specification. For example, let’s say I’m trying to figure out which branch name was picked for a topic I worked on upstream.</p>
<pre><code>$ needle=fcb2205b77470c60f996a3206b2d4aebf6e951e3
$ git for-each-ref --contains $needle refs/remotes/origin | wc -l
63
</code></pre>
<p>Naively searching for the set of branches which contain the thing I’m looking for can return many results, for example if my commit was merged and is now contained in many other branches. But the new <code>%(is-base:</code>) atom can produce the right answer:</p>
<pre><code>$ git for-each-ref --format="%(refname) %(is-base:$needle)" refs/remotes/origin \
  | grep '('
refs/remotes/origin/tb/incremental-midx-part-1 (fcb2205b77470c60f996a3206b2d4aebf6e951e3)
</code></pre>
<p>[<a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/git/git/compare/3dd2a2feca6e47b2931dadadad44f92a35e8cf51...4b707a6e99651b1ba7c8718f95ee57c6721c85d6">source</a>]</p>
<hr>
<ul>
<li>Git is famously portable and compatible with a wide variety of systems and architectures, including some fairly exotic ones. But until this most recent release, Git has lacked a formal platform support policy.
<p>This release includes a new “<a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/git/git/blob/v2.47.0/Documentation/technical/platform-support.txt">Platform Support Policy</a>” document which outlines Git’s official policy on the matter. The exact details can be found in the source link below, but the current gist is that platforms must have <a target="_blank" rel="external nofollow noopener noreferrer" href="https://en.wikipedia.org/wiki/C99">C99</a> or <a target="_blank" rel="external nofollow noopener noreferrer" href="https://en.wikipedia.org/wiki/C11_(C_standard_revision)">C11</a>, use versions of dependencies which are stable or have long-term support, and must have an active security support system. Discussions about adding additional requirements, including possibly depending upon Rust in a future version, are ongoing.</p>
<p>The policy also has suggestions for platform maintainers on which branches to test and how to report and fix compatibility issues.</p>
<p>[<a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/git/git/compare/a3d71f2076d423dd7d0e929ca213707336db0290...d53db106e0ffcaa82ab8336adc35d7e790d985cb">source</a>]</p>
</li>
<li>
<p>A couple of releases ago, <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.blog/open-source/git/highlights-from-git-2-45/#preliminary-reftable-support">we discussed</a> Git’s preliminary support for a new reference backend known as <a target="_blank" rel="external nofollow noopener noreferrer" href="https://git-scm.com/docs/reftable">reftable</a>. If you’re fuzzy on the details, our previous post is chock full of them.</p>
<p>This release brings a number of unit tests which were written in the reftable implementation’s custom testing framework to Git’s standard unit test framework. These migrations were done by Chandra Pratap, one of the Git project’s <a target="_blank" rel="external nofollow noopener noreferrer" href="https://summerofcode.withgoogle.com/programs/2024/projects/tlh611d7">Google Summer of Code (GSoC) contributors</a>.</p>
<p>This release also saw reftable gain better support when dealing with concurrent writers, particularly during stack compaction. The reftable backend also gained support for git for-each-ref’s –exclude option which we wrote about <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.blog/open-source/git/highlights-from-git-2-42/#exclude-references-by-pattern-in-for-each-ref">when Git 2.42 was released</a>.</p>
<p>[<a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/git/git/compare/c639478d794c4d3065d1ef6e98b87c7e74a6823b...18695250667912d8278e76dce453706c3d488173">source</a>, <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/git/git/compare/ed155187b429a2a6b6475efe1767053df37ccfe1...2b14ced370aea017efc32b525fd72a6dd2cc60c5">source</a>, <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/git/git/compare/dd903659cd54d4e21ca41b0c1f5d10b66763eb60...85da2a2ab62e24a8b9ff183fe3a451b445632487">source</a>, <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/git/git/compare/d4d677704d74db389d2f56975794cd85acb8181f...08e83b5ec5db41dd01ce2af54ee67cb1d77e8a6e">source</a>, <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/git/git/compare/17d4b10aea6bda2027047a0e3548a6f8ad667dde...e49d2472d2320d370b34c7fcdde933660c47968b">source</a>, <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/git/git/compare/668843e6d8568b1054a55c4f3e8ee7c55acb5380...d2511eeae5fc679cf1b1591b3604e6abf5c056c2">source</a>, <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/git/git/compare/5e56a39e6a9b8621e62f7a18ed027777a095dba7...5e440bf7f1884e79f345225e55fbe3ccabf42b5a">source</a>, <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/git/git/compare/6891103f7206f2a46c579ec87f4f61482e377a27...6f1e9394e2e02d16dfbef02c1585a1acfd2a5118">source</a>, <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/git/git/compare/2b9b229cb4e6097be538db18a0124d30215b3a30...f234df07f66c8f67391cc8ded5ade43b8a4428b6">source</a>, <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/git/git/compare/61fd5de05fbb20b07a36b9f099dd86db7fa85db0...3a498b49d1b7d1ffc939b87310533a40ecbd8c43">source</a>, <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/git/git/compare/6c3c451fb6e1c3ca83f74e63079d4d0af01b2d69...0dc84a806c53b02b465616d26efbca73682c58dd">source</a>, <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/git/git/compare/468ebc52f3a8221e2f4863e0194059f113618273...9a1fb8af9887c99420f41a36667e4a7905d6266b">source</a>]</p>
</li>
<li>
<p>While we’re on the topic of unit testing, there were a number of other areas of the project which received more thorough unit test coverage, or migrated over existing test from Git’s Shell-based integration test suite.</p>
<p>Git’s hashmap API, OID array, and urlmatch normalization features all were converted from Shell-based tests with custom helpers to unit tests. The unit test framework itself also received significant attention, ultimately resulting in using the <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/clar-test/clar">Clar framework</a>, which was originally written to replace the unit test framework in libgit2.</p>
<p>Many of these unit test conversions were done by Ghanshyam Thakkar, another one of Git’s <a target="_blank" rel="external nofollow noopener noreferrer" href="https://summerofcode.withgoogle.com/programs/2024/projects/e9C4rhrv">GSoC contributors</a>. Congratulations, Ghanshyam!</p>
<p>[<a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/git/git/compare/7644bb0aaa9f89cd5d523cbecfd9d87d890b4cb9...8afda42fce60126fe6d3bde86a44d8db63a77c08">source</a>, <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/git/git/compare/3fb745257b30a643ee78c9a7c52ab107c82e4745...c3de556a841f132832f742d1c4d3a2618ee3b355">source</a>, <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/git/git/compare/63b5fcdde90361195f7f6ade199c90d91e2ecf53...a680635e05848f4428b4867b7e7ad0e07c94ae8b">source</a>, <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/git/git/compare/029c870ab55434ad90652a4b82b1616679ea17be...05026637f3ed0787f15c27da9142896596cc6873">source</a>, <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/git/git/compare/b9849e4f7631d80f146d159bf7b60263b3205632...9ddec6b79af6786bc628e66a75f47040fea1857b">source</a>, <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/git/git/compare/f6df5e2d05eae0c0c425b9be9f05be63f3823856...3469a23659d8197190d2765cf9f31dec5ab602fa">source</a>, <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/git/git/compare/406f326d271e0bacecdb00425422c5fa3f314930...6e71d6ac7cb575d04c452762662b00a89cd0b0db">source</a>]</p>
</li>
<li>
<p>While we’re on the topic of Google Summer of Code contributors, we should mention last (but not least!) another student, <a target="_blank" rel="external nofollow noopener noreferrer" href="https://summerofcode.withgoogle.com/programs/2024/projects/ukm4PTEF">shejialuo</a>, improved <code>git fsck</code> to check the reference storage backend for integrity in addition to the regular object store. They introduced a new <code>git refs verify</code> sub-command which is run through via <code>git fsck</code>, and catches many reference corruption issues.</p>
<p>[<a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/git/git/compare/87a1768b93a67d0420255a43d9e07387b2e805ad...1c31be45b3b263670c7d2a91c27cc119b77dd2e2">source</a>]</p>
</li>
<li>
<p>Since <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/git/git/compare/fa2f2f085ed8999b799d48e652f9e438571e8491...61b0fcbb64d00d52290d433c1e754c01740b3d19">at least 2019</a>, there has been an effort to find and annotate unused parameters in functions across Git’s codebase. Annotating parameters as unused can help identify better APIs, and often the presence of an unused parameter can point out a legitimate bug in that function’s implementation.</p>
<p>For many years, the Git project has sought to compile with <code>-Wunused-parameter</code> under its special <code>DEVELOPER=1</code> mode, making it a compile-time error to have or introduce any unused parameters across the codebase. During that time, there have been many unused parameter cleanups and bug fixes, all done while working around other active development going on in related areas.</p>
<p>In this release, that effort came to a close. Now when compiling with <code>DEVELOPER=1</code>, it is now a compile-time error to have unused parameters, making Git’s codebase cleaner and safer going forward.</p>
<p>[<a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/git/git/compare/a6dce0afc3f26428721deaa6267a89141b5d5a5e...d4dc0efd7d4b71acadae61f619b9e84f97d15c83">source</a>, <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/git/git/compare/21c66081ca726f300296a5c6d29088caf8740417...516a9ec3d5874aad41757e573f7b841bb45cb098">source</a>, <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/git/git/compare/4476304a06e6dad284e0d75245cd32f01a01a8c7...ab8bcd2dbd2f4e820d3bfb3d79b123655c52561b">source</a>, <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/git/git/compare/5ecd5fa58b3315d6bdd6ef9218c7ae442782bc5d...a051ca5e650138230f3dd61bda911f0f409ebf23">source</a>, <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/git/git/compare/6dcb2db0fa20cbad961ebdc8414ce4f9246d8c2b...a61bc8879eaade17eccec2a22693501480843db1">source</a>, <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/git/git/compare/2ff26d228600848ecf3d44b3796beee310ebcccf...a6bcb3ca010ed47d26dfa5d5d221f91a46887c2f">source</a>, <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/git/git/compare/1f4d89dfce80e17e6d9939b93391a8ba3885f750...72c9793c154edbde16085f0f04db970e082c7f0b">source</a>, <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/git/git/compare/bb9c16bd4f1a9a00799e10c81ee6506cf468c0c7...1784522a1f3d35195c2c28137ed49f36caa5022e">source</a>]</p>
</li>
<li>
<p>Way back <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.blog/open-source/git/highlights-from-git-2-34/">when Git 2.34 was released</a>, we covered a burgeoning effort to find and fix memory leaks throughout the Git codebase. Back then, we wrote that since Git typically has a very short runtime, it is much less urgent to free memory than it is in, say, library code, since a process’s memory will be “freed” by the operating system when the process stops.</p>
<p>But as Git internals continue to be reshaped with the eventual goal of having them be call-able as a first party library, plugging any memory leaks throughout the codebase is vitally important.</p>
<p>That effort has continued in this release, with more leaks throughout the codebase being plugged. For all of the details, check out the source links below:</p>
<p>[<a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/git/git/compare/2b800ec45e53051c41a85900009430704bfdf031...46f6ca2a68e02dd68132ed0b64cd55a8b6569e29">source</a>, <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/git/git/compare/f123c19e72190e666fbcd827924fd1f090a9d6ae...13b23d2da552b9476a0025562bc4ab8954d5be45">source</a>, <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/git/git/compare/3a7362eb9fad0c4838f5cfaa95ed3c51a4c18d93...77d4b3dd73c44b2c617345a6d9686d2f7f5b8a68">source</a>, <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/git/git/compare/25673b1c476756ec0587fb0596ab3c22b96dc52a...f30bfafcd41d0f13575361957dc361aa2be4d4c5">source</a>]</p>
</li>
<li>
<p>The <code>git mergetool</code> command learned a new tool configuration for Visual Studio Code. While it <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/microsoft/vscode/issues/5770#issuecomment-1188658476">has always been possible</a> to manually configure Git to run VSCode’s 3-way merge resolution, it required manual configuration.</p>
<p>In Git 2.47, you can now easily configure your repository by running:</p>
<pre><code>$ git config set merge.tool vscode
</code></pre>
<p>and subsequent runs of git mergetool will automatically open VSCode in the correct configuration.</p>
<p>[<a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/git/git/compare/f4806a9a3e2640f2df1c3f092a50c834f4e4f2e6...6b77283f5e7fffcc74c032f2e692aaab1ddbe58a">source</a>]</p>
</li>
</ul>
<h2 id="the-rest-of-the-iceberg">The rest of the iceberg<a aria-label="The rest of the iceberg" class="heading-link pl-2 text-italic text-bold" href="#the-rest-of-the-iceberg"></a></h2>
<p>That’s just a sample of changes from the latest release. For more, check out the release notes for <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/git/git/blob/v2.47.0/Documentation/RelNotes/2.47.0.txt">2.47</a>, or <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/git/git/tree/v2.47.0/Documentation/RelNotes">any previous version</a> in <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/git/git">the Git repository</a>.</p>
</body></html>
<p>The post <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.blog/open-source/git/highlights-from-git-2-47/">Highlights from Git 2.47</a> appeared first on <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.blog">The GitHub Blog</a>.</p>

</div>

<div>
<div class="tag-plugin link dis-select"><a class="link-card plain" title="Highlights from Git 2.47" href="https://github.blog/open-source/git/highlights-from-git-2-47/" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill="icon"><div class="left"><span class="title">Highlights from Git 2.47</span><span class="cap link fs12">https://github.blog/open-source/git/highlights-from-git-2-47/</span></div><div class="right"><div class="lazy img" data-bg="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.4/link/8f277b4ee0ecd.svg"></div></div></a></div>
</div>




<div class="article-footer reveal fs14"><section id="license"><div class="header"><span>许可协议</span></div><div class="body"><p>本文采用 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/me-shaon/GLWTPL/blob/master/translations/LICENSE_zh-CN">GLWT（Good Luck With That，祝你好运）公共许可证</a> 许可协议，转载请注明出处。</p>
</div></section><section id="share"><div class="header"><span>分享文章</span></div><div class="body"><div class="link"><input class="copy-area" readonly="true" id="copy-link" value="https://blog.imc.re/RSSBOX/rss/1666e8e3.html"></div><div class="social-wrap dis-select"><a class="social share-item wechat" onclick="util.toggle(&quot;qrcode-wechat&quot)"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.4/social/b32ef3da1162a.svg"></a><a class="social share-item weibo" target="_blank" rel="external nofollow noopener noreferrer" href="https://service.weibo.com/share/share.php?url=https://blog.imc.re/RSSBOX/rss/1666e8e3.html&title=Highlights From Git 2.47 - RSSBOX&pics=https://github.blog/wp-content/uploads/2024/10/image1.png?w=1024&resize=1024%2C453&summary=


The open source Git project just released Git 2.47 with features and bug fixes from over 83 contributors, 28 of th..."><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.4/social/80c07e4dbb303.svg"></a><a class="social share-item email" href="mailto:?subject=Highlights From Git 2.47 - RSSBOX&amp;body=https://blog.imc.re/RSSBOX/rss/1666e8e3.html"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.4/social/a1b00e20f425d.svg"></a><a class="social share-item link" onclick="util.copy(&quot;copy-link&quot;, &quot;复制成功&quot;)"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.4/social/8411ed322ced6.svg"></a></div><div class="qrcode" id="qrcode-wechat" style="visibility:hidden;height:0"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://api.qrserver.com/v1/create-qr-code/?size=256x256&data=https://blog.imc.re/RSSBOX/rss/1666e8e3.html"></div></div></section></div>

</article>

<div class="related-wrap reveal" id="read-next"><section class="body"><div class="item" id="prev"><div class="note">较新文章</div><a href="/RSSBOX/rss/1f0f88f8.html">Improving Platform Resilience at Cloudflare Through Automation</a></div><div class="item" id="next"><div class="note">较早文章</div><a href="/RSSBOX/rss/57c81727.html">THAT'S NOT WHAT I MEANT! 🤦</a></div></section></div>


<div class="related-wrap reveal" id="related-posts">
    <section class="header">
      <div class="title cap theme">您可能感兴趣的文章</div>
    </section>
    <section class="body">
    <div class="related-posts"><a class="item" href="/RSSBOX/rss/bfc3cafa.html" title="5 Tips and Tricks When Using GitHub Copilot Workspace"><span class="title">5 Tips and Tricks When Using GitHub Copilot Workspace</span></a><a class="item" href="/RSSBOX/rss/7a4438ab.html" title="Attacking Browser Extensions"><span class="title">Attacking Browser Extensions</span></a><a class="item" href="/RSSBOX/rss/5117513d.html" title="Career Growth, Learning, and Fun, Oh My! Your Guide to GitHub Universe 2024"><span class="title">Career Growth, Learning, and Fun, Oh My! Your Guide to GitHub Universe 2024</span></a><a class="item" href="/RSSBOX/rss/11f80b10.html" title="Cybersecurity Spotlight on Bug Bounty Researcher @Adrianoapj"><span class="title">Cybersecurity Spotlight on Bug Bounty Researcher @Adrianoapj</span></a><a class="item" href="/RSSBOX/rss/b5fc2f2b.html" title="Diversity, Inclusion, and Belonging at GitHub in 2024"><span class="title">Diversity, Inclusion, and Belonging at GitHub in 2024</span></a></div></section></div>





      
<footer class="page-footer reveal fs12"><hr><div class="sitemap"><div class="sitemap-group"><span class="fs14">文章</span><a href="/RSSBOX/categories">分类</a><a href="/RSSBOX/tags">标签</a><a href="/RSSBOX/archives">归档</a></div><div class="sitemap-group"><span class="fs14">更多</span><a href="https://blog.imc.re/">博客</a><a target="_blank" rel="noopener" href="https://imc.re/">IMC.RE</a></div></div><div class="text"><p><a href="/">@RSSBOX</a> 2023 author by <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/MHG-LAB/RSSBOX">MHuiG</a> powered by SummerGoro。<br><br>本博客所有文章除特别声明外，均采用 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/me-shaon/GLWTPL/blob/master/translations/LICENSE_zh-CN">GLWT（Good Luck With That，祝你好运）公共许可证</a> 许可协议，转载请注明出处。</p>
</div></footer>

      <div class="float-panel mobile-only blur" style="display:none">
  <button type="button" class="sidebar-toggle mobile" onclick="sidebar.toggle()">
    <svg class="icon" style="width: 1em; height: 1em;vertical-align: middle;fill: currentColor;overflow: hidden;" viewbox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="15301"><path d="M566.407 808.3c26.9-0.1 49.3-20.8 51.6-47.6-1.9-27.7-23.9-49.7-51.6-51.6h-412.6c-28.2-1.4-52.6 19.5-55.5 47.6 2.3 26.8 24.6 47.5 51.6 47.6h416.5v4z m309.3-249.9c26.9-0.1 49.3-20.8 51.6-47.6-2.2-26.8-24.6-47.5-51.6-47.6h-721.9c-27.7-2.8-52.5 17.4-55.3 45.1-0.1 0.8-0.1 1.7-0.2 2.5 0.9 27.2 23.6 48.5 50.7 47.6H875.707z m-103.1-245.9c26.9-0.1 49.3-20.8 51.6-47.6-0.4-28.3-23.2-51.1-51.5-51.6h-618.9c-29.5-1.1-54.3 21.9-55.5 51.4v0.2c1.4 27.8 25.2 49.2 53 47.8 0.8 0 1.7-0.1 2.5-0.2h618.8z" p-id="15302"/><path d="M566.407 808.3c26.9-0.1 49.3-20.8 51.6-47.6-1.9-27.7-23.9-49.7-51.6-51.6h-412.6c-28.2-1.4-52.6 19.5-55.5 47.6 1.9 27.7 23.9 49.7 51.6 51.6h416.5z m309.3-249.9c26.9-0.1 49.3-20.8 51.6-47.6-2.2-26.8-24.6-47.5-51.6-47.6h-721.9c-27.7-2.8-52.5 17.4-55.3 45.1-0.1 0.8-0.1 1.7-0.2 2.5 0.9 27.2 23.6 48.5 50.7 47.6H875.707z m-103.1-245.9c26.9-0.1 49.3-20.8 51.6-47.6-0.4-28.3-23.2-51.1-51.5-51.6h-618.9c-29.5-1.1-54.3 21.9-55.5 51.4v0.2c1.4 27.8 25.2 49.2 53 47.8 0.8 0 1.7-0.1 2.5-0.2h618.8z" p-id="15303"/></svg>
  </button>
</div>

    </div>
  </div>
  <div class="scripts">
    <script type="text/javascript">
  const stellar = {
    // 懒加载 css https://github.com/filamentgroup/loadCSS
    loadCSS: (href, before, media, attributes) => {
      var doc = window.document;
      var ss = doc.createElement("link");
      var ref;
      if (before) {
        ref = before;
      } else {
        var refs = (doc.body || doc.getElementsByTagName("head")[0]).childNodes;
        ref = refs[refs.length - 1];
      }
      var sheets = doc.styleSheets;
      if (attributes) {
        for (var attributeName in attributes) {
          if (attributes.hasOwnProperty(attributeName)) {
            ss.setAttribute(attributeName, attributes[attributeName]);
          }
        }
      }
      ss.rel = "stylesheet";
      ss.href = href;
      ss.media = "only x";
      function ready(cb) {
        if (doc.body) {
          return cb();
        }
        setTimeout(function () {
          ready(cb);
        });
      }
      ready(function () {
        ref.parentNode.insertBefore(ss, before ? ref : ref.nextSibling);
      });
      var onloadcssdefined = function (cb) {
        var resolvedHref = ss.href;
        var i = sheets.length;
        while (i--) {
          if (sheets[i].href === resolvedHref) {
            return cb();
          }
        }
        setTimeout(function () {
          onloadcssdefined(cb);
        });
      };
      function loadCB() {
        if (ss.addEventListener) {
          ss.removeEventListener("load", loadCB);
        }
        ss.media = media || "all";
      }
      if (ss.addEventListener) {
        ss.addEventListener("load", loadCB);
      }
      ss.onloadcssdefined = onloadcssdefined;
      onloadcssdefined(loadCB);
      return ss;
    },

    // 从 butterfly 和 volantis 获得灵感
    loadScript: (src, opt) => new Promise((resolve, reject) => {
      var script = document.createElement('script');
      if (src.startsWith('/')){
        src = stellar.config.root + src.substring(1);
      }
      script.src = src;
      if (opt) {
        for (let key of Object.keys(opt)) {
          script[key] = opt[key]
        }
      } else {
        // 默认异步，如果需要同步，第二个参数传入 {} 即可
        script.async = true
      }
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    }),

    // https://github.com/jerryc127/hexo-theme-butterfly
    jQuery: (fn) => {
      if (typeof jQuery === 'undefined') {
        stellar.loadScript(stellar.plugins.jQuery).then(fn)
      } else {
        fn()
      }
    }
  };
  stellar.version = '1.19.0';
  stellar.github = 'https://github.com/xaoxuu/hexo-theme-stellar/tree/1.19.0';
  stellar.config = {
    date_suffix: {
      just: '刚刚',
      min: '分钟前',
      hour: '小时前',
      day: '天前',
      month: '个月前',
    },
    root : '/RSSBOX/',
  };

  // required plugins (only load if needs)
  stellar.plugins = {
    jQuery: 'https://gcore.jsdelivr.net/npm/jquery@3.6.2/dist/jquery.min.js'
  };

  if ('local_search') {
    stellar.search = {};
    stellar.search.service = 'local_search';
    if (stellar.search.service == 'local_search') {
      let service_obj = Object.assign({}, {"field":"all","path":"/search.json","content":true,"codeblock":true,"sort":"-date"});
      stellar.search[stellar.search.service] = service_obj;
    }
  }

  // stellar js
  stellar.plugins.stellar = Object.assign({"sites":"/js/plugins/sites.js","friends":"/js/plugins/friends.js","ghinfo":"/js/plugins/ghinfo.js","timeline":"/js/plugins/timeline.js","linkcard":"/js/plugins/linkcard.js","fcircle":"/js/plugins/fcircle.js","weibo":"/js/plugins/weibo.js"});

  stellar.plugins.marked = Object.assign("https://cdn.bootcdn.net/ajax/libs/marked/4.0.18/marked.min.js");
  // optional plugins
  if ('true' == 'true') {
    stellar.plugins.lazyload = Object.assign({"enable":true,"js":"https://gcore.jsdelivr.net/npm/vanilla-lazyload@17.8.3/dist/lazyload.min.js","transition":"blur"});
  }
  if ('true' == 'true') {
    stellar.plugins.swiper = Object.assign({"enable":true,"css":"https://unpkg.com/swiper@8.4.5/swiper-bundle.min.css","js":"https://unpkg.com/swiper@8.4.5/swiper-bundle.min.js"});
  }
  if ('' == 'true') {
    stellar.plugins.scrollreveal = Object.assign({"enable":null,"js":"https://gcore.jsdelivr.net/npm/scrollreveal@4.0.9/dist/scrollreveal.min.js","distance":"8px","duration":500,"interval":100,"scale":1});
  }
  if ('true' == 'true') {
    stellar.plugins.preload = Object.assign({"enable":true,"service":"flying_pages","instant_page":"https://gcore.jsdelivr.net/gh/volantis-x/cdn-volantis@4.1.2/js/instant_page.js","flying_pages":"https://gcore.jsdelivr.net/gh/gijo-varghese/flying-pages@2.1.2/flying-pages.min.js"});
  }
  if ('true' == 'true') {
    stellar.plugins.fancybox = Object.assign({"enable":true,"js":"https://gcore.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.umd.js","css":"https://gcore.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.css","selector":".swiper-slide img"});
  }
  if ('false' == 'true') {
    stellar.plugins.heti = Object.assign({"enable":false,"css":"https://unpkg.com/heti@0.9.2/umd/heti.min.css","js":"https://unpkg.com/heti@0.9.2/umd/heti-addon.min.js"});
  }
  if ('true' == 'true') {
    stellar.plugins.copycode = Object.assign({"enable":true,"js":"/js/plugins/copycode.js","default_text":"Copy","success_text":"Copied"});
  }
</script>

<!-- required -->

  
<script src="/RSSBOX/js/main.js" async></script>



<!-- optional -->

  <script>
  function loadJS() {
    const els = document.querySelectorAll("#comments #giscus");
    if (els.length === 0) return;
    els.forEach((el, i) => {
      try {
        el.innerHTML = '';
      } catch (error) {
        console.log(error);
      }
      var script = document.createElement('script');
      script.src = 'https://giscus.app/client.js';
      script.async = true;
      for (let key of Object.keys(el.attributes)) {
        let attr = el.attributes[key];
        if (['class', 'id'].includes(attr.name) === false) {
          script.setAttribute(attr.name, attr.value);
        }
      }
      el.appendChild(script);
    });
  }
  window.addEventListener('DOMContentLoaded', (event) => {
    loadJS();
  });
</script>




<!-- inject -->


  </div>
</body>
</html>
